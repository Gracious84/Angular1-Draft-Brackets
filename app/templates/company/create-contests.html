<div class="create-contests-page-wrapper blue-cash-bg">
    <div id="create-contests-wrapper">
        <div class="container-fluid container" id="create-contests-page">
            <div class="row">
                <div class="col-sm-8 center container zan-no-invites">
                    <div class="create-contests-holder">
                        <h2 class="text-center find-contests-title text-uppercase red">Create Contests</h2>
                        <p class="enlarge-p draft-enlarge-p">
                            To create your contest please enter the info below:
                        </p>
                        <form id="createContestForm" class="form-horizontal col-sm-12">
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="League">League</label>
                                <div class="col-sm-9">
                                    <select class="form-control" id="League" name="league">
                                        <option hidden>---</option>
                                        <option value="nba">NBA</option>
                                        <option value="nfl">NFL</option>
                                        <option value="mlb">MLB</option>
                                        <option value="nhl">NHL</option>
                                        <option value="mma">MMA</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="ContestType">Contest Type</label>
                                <div class="col-sm-9">
                                    <select class="form-control" id="ContestType" name="contestType" ng-model="draftORbracket" ng-change="switch_label($event)">
                                        <option hidden>---</option>
                                        <option value="draft">Draft</option>
                                        <option value="bracket">Bracket</option>
                                    </select>
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-3 draft-time hide" for="draft-time">Draft Start Date</label>
                                <label class="control-label col-sm-3 bracket-deadline hide" for="bracket-deadline">Bracket Submit Date</label>
                                <div class="col-sm-9">
                                    <input type="date" name="submitTimeDate" class="form-control hide bracket-deadline">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3 draft-time hide" for="draft-time">Draft Start Time</label>
                                <label class="control-label col-sm-3 bracket-deadline hide" for="bracket-deadline">Bracket Submit Time</label>
                                <div class="col-sm-9">
                                    <input type="time" name="submitTimeTime" class="form-control hide draft-time">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-3" for="contest-name">Contest Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="contest-name" placeholder="" name="contestName">
                                </div>
                            </div>
                            <!-- <div class="form-group invite-players-entries">
                                <label class="control-label col-sm-3" for="invite-players">Players To Invite</label>
                                <div class="col-sm-9 invite-players-wrapper">
                                    <input type="text" id="invite-players" class="form-control" name="invitePlayers[]" placeholder="Enter Email or Cell Phone #" ng-model="invite" />
                                    <button type="button" class="btn btn-default addButton"><i class="fa fa-plus"></i> Add another</button>
                                </div>
                            </div> -->

                            <div class="form-group" id="invite-players-entries">
                                <label class="control-label col-sm-3" for="invite-players">Players To Invite</label>
                                <div class="col-sm-9 invite-players-wrapper">
                                    <input type="text" id="invite-players" class="form-control col-sm-11" name="invitePlayers[]" placeholder="Enter Email or Cell Phone #" />
                                </div>
                            </div>
                            <div class="text-center">
                                <button ng-click="add_button($event)" type="button" class="btn btn-default addButton text-center"><i class="fa fa-plus"></i> Add another</button>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-3" for="message-to-players">Message To Players</label>
                                <div class="col-sm-9">
                                    <textarea class="form-control" id="message-to-players" rows="3" name="messageToPlayers"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="ContestType">Entry Fee</label>
                                <div class="col-sm-9">
                                    <select class="form-control" id="EntryCost" name="entryFee">
                                        <option value="test">FREE</option>
                                        <option value="25">$25</option>
                                        <option value="50">$50</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="text-center">
                                    <label class="form-check-label" for="send-email-reminders">Send email reminders to players </label>
                                    <input class="form-check-input" type="checkbox" value="" id="send-email-reminders" name="send-email-reminders">
                                </div>
                            </div>

                            <div class="form-group recaptcha-box-wrap" >
                                <div class="recaptcha-box" vc-recaptcha theme="light" key="recaptchaPublicKey" on-success="setRecaptchaResponse(response)"></div>
                             </div>

                            <div class="form-group"> 
                                <div class="text-center">
                                    <button type="submit" ng-click="createcontestsCtrl.submitContest($event)" class="btn btn-default submit-contest center">Submit</button>
                                </div>
                            </div>

                            <div id="messages" class="hide" role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <div id="messages_content"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function() {
        var max_fields = 50; //maximum input boxes allowed
        var wrapper = $("#invite-players-entries"); //Fields wrapper
        var add_button = $(".addButton"); //Add button ID
        var x = 1; //initlal text box count

        $(add_button).click(function(e){ //on add input button click
            e.preventDefault();
            if(x < max_fields){ //max input box allowed
                x++; //text box increment
                $(wrapper).append('<div class="additional-players col-sm-12">' +
                '<input type="text" id="invite-players" class="form-control col-sm-11" name="invitePlayers[]" placeholder="Enter Email or Cell Phone #" />' +
                '<a href="#" class="remove_field col-sm-1"><i class="fa fa-times"></a></div>'); //add input box
            }
        });
         
        $(wrapper).on("click",".remove_field", function(e){ //user click on remove field
            e.preventDefault(); $(this).parent('div').remove(); x--;
        });

        $('#ContestType').change(function() {
            if ($(this).val() == 'draft') {
                $('label.draft-time, input.draft-time, input.bracket-deadline').removeClass('hide').show();
                $('label.bracket-deadline').addClass('hide').hide();
            } else if ($(this).val() == 'bracket') {
                $('label.bracket-deadline, input.bracket-deadline, input.draft-time').removeClass('hide').show();
                $('label.draft-time').addClass('hide').hide();
            }
        });

        $("button.submit-contest").click(function(e) {
            e.preventDefault(); // avoid to execute the actual submit of the form.

            // var zanData = $("#createContestForm").serialize();
            var form = $('#createContestForm');

            $.ajax({
                type: form.attr('method'),
                url: form.attr('action'),
                data: form.serialize(), // serializes the form's elements.
                // data: zanData,
                success: function (data) {
                    console.log('Submission was successful.');
                    $('#messages').removeClass('hide').addClass('alert alert-success').slideDown().show();
                    $('#messages_content').html('<h4>Your contest has been submitted!</h4>');
                    // alert(data); // show response from the php script.
                    // console.log(data);
                },
                error: function (data) {
                    $('#messages').removeClass('hide').addClass('alert alert-danger').slideDown().show();
                    $('#messages_content').html('<h4>Your contest has not been submitted!</h4>');
                    console.log('An error occurred.');
                    // console.log(data);
                },
            });

            setTimeout(function () {
                $('form#createContestForm').trigger('submit');
            }, 2000);
        });
    });
    $(window).load(function() {
        doCookieStuff();
    });
</script>
<script src="//www.google.com/recaptcha/api.js?onload=vcRecaptchaApiLoaded&render=explicit" ></script>